@startuml monitoring

skinparam linetype ortho
skinparam monochrome false
skinparam componentStyle uml2
skinparam backgroundColor #fff
skinparam ArrowColor black
skinparam NoteBorderColor Grey
skinparam NoteBackgroundColor #fdfdfd
skinparam defaultTextAlignment center
skinparam activity {
FontName Ubuntu
}

rectangle monitoring as "monitoring.fritz.box" <<RasPi>> {
  component grafana
  component prometheus
  component nginx <<reverse-proxy>>
  prometheus -> grafana
  grafana ~right~> nginx
}

rectangle supervisor as "supervisor.fritz.box" <<RasPi>> {
  component tmp_grafana as "grafana"
  component tmp_prometheus as "prometheus"
  component tmp_nginx <<reverse-proxy>>
  tmp_prometheus -> tmp_grafana
  tmp_grafana ~right~> tmp_nginx
}
note right of supervisor: Temporary stack to check if the actual\nmonitoring stack in prometheus.fritz.box is stable\nand the RasPi node provides enough resources.

rectangle clients <<multiple>> {
  component node_exporter
  component cAdvisor
}
note bottom of clients: kobol.fritz.box\ncaprica.fritz.box\nall RasPi nodes

clients -left-> monitoring
monitoring -down-> supervisor

@enduml
