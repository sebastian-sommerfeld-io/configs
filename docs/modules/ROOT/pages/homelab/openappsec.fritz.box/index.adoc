= RasPi `openappsec.fritz.box`
Sebastian Sommerfeld <sebastian@sommerfeld.io>
:description: Installation guide for machine 'caprica'

CAUTION: TODO: Intro

[cols="1,4", options="header"]
|===
|Metric |Value
|Model |Raspberry Pi 4 Model B
|===

include::ROOT:partial$homelab/workstations/common/raspi-rack.adoc[]

== Install
=== Operating System
Use the Raspberry Pi Imager to install "Ubuntu Server 23.04 (64-bit)" onto a SD card. Use the following settings:

image:ROOT:homelab/raspi-imager-settings.png[]

CAUTION: Make sure to enter a valid hostname and user `sebastian` uses the correct password!

=== Configuration and package installation
. Steps to run on you normal workstation (= a machine with SSH access to the RasPi node which is probably the ony you used to setup the SD card)
.. Enable passwordless SSH connections: `ssh sebastian@openappsec.fritz.box` and `ssh-copy-id sebastian@openappsec.fritz.box` or by using the Jarvis modules link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect-setup-passwordless/module-sh.html[ssh-connect-setup-passwordless] and link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect/module-sh.html[ssh-connect] (all from your workstation, not on the RasPi node).
.. Apply ansible configs from this repo (`xref:AUTO-GENERATED:bash-docs/src/main/homelab/ansible-cli-sh.adoc[src/main/homelab/ansible-cli.sh]`)
. FritzBox Settings
.. It is recommended to always assign the same IP address to this RasPi node. This can help avoid issues with IP address conflicts or changes that could cause the communication between services to fail or become unreliable.

NOTE: This machine acts as a testing ground for open-appsec, so it not critical to any production environment. But still it is not intended for development purposes so there is no need to push any data to Github. Therefore there is no SSH key configuration for GitHub on this machine. It is only possible to clone public repositories via HTTPS.

=== IPTables
CAUTION: TODO ... Docs ... Best with ansible!!!

== Start Services
=== Docker Compose Stack: Ops
include::ROOT:partial$homelab/services/docker/ops.adoc[]

Connect via SSH and start the stack by using `xref:AUTO-GENERATED:bash-docs/src/main/homelab/services-cli-sh.adoc[~/work/repos/sebastian-sommerfeld-io/configs/src/main/homelab/services-cli.sh]`.

=== Docker Compose Stack: open-appsec
CAUTION: TODO: Link to docs

== Risks and Technical Debts

. See https://github.com/sebastian-sommerfeld-io/configs/issues/issues?q=is%3Aopen+label%3Arisk%2Csecurity+
