= RasPi `monitoring.fritz.box`
Sebastian Sommerfeld <sebastian@sommerfeld.io>
:description: Installation guide for machine 'caprica'

The Raspberry Pi node called "monitoring.fritz.box" serves as the central monitoring hub for all the machines in my homelab. To achieve this, I run a stack of Prometheus and Grafana in Docker.

With Prometheus, I can collect system metrics from all the machines in my homelab, including CPU usage, memory usage, disk utilization, and network traffic. This gives me a comprehensive view of the health and performance of my systems, allowing me to identify and address any issues before they become critical. In addition to system metrics, I have also configured Prometheus to collect data about the up/down status of services running on some machines and on the internet.

To visualize and analyze the data collected by Prometheus, I use Grafana, a powerful tool that allows me to create interactive dashboards. This enables me to quickly identify trends, anomalies, and other patterns in my system data, providing valuable insights into the health and performance of my homelab.

[cols="1,4", options="header"]
|===
|Metric |Value
|Model |Raspberry Pi 4 Model B
|===

include::ROOT:partial$homelab/workstations/common/raspi-rack.adoc[]

== Install
=== Operating System
// "Raspberry Pi OS Lite (64-bit)" (which is a port of Debian Bullseye without and desktop environment)
Use the Raspberry Pi Imager to install "Ubuntu Server 23.04 (64-bit)" onto a SD card. Use the following settings:

image:ROOT:homelab/raspi-imager-settings.png[]

CAUTION: Make sure to enter a valid hostname and user `sebastian` uses the correct password!

=== Configuration and package installation
. Steps to run on you normal workstation (= a machine with SSH access to the RasPi node which is probably the ony you used to setup the SD card)
.. Enable passwordless SSH connections: `ssh sebastian@monitoring.fritz.box` and `ssh-copy-id sebastian@monitoring.fritz.box` or by using the Jarvis modules link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect-setup-passwordless/module-sh.html[ssh-connect-setup-passwordless] and link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect/module-sh.html[ssh-connect] (all from your workstation, not on the RasPi node).
.. Apply ansible configs from this repo (`xref:AUTO-GENERATED:bash-docs/src/main/homelab/ansible-cli-sh.adoc[src/main/homelab/ansible-cli.sh]`)
. Setps to run on the RasPi node
.. Allow caprica to work with github. Use public key `id_rsa.pub`, NOT the pivate key! The SSH keypair was created from the Ansible playbook.

NOTE: This machine is not intended for development purposes so there is no need to push any data to Github. Therefore there is no SSH key configuration for GitHub on this machine. It is only possible to clone public repositories via HTTPS.

== Start Services
=== Docker Compose Stack: Ops
include::ROOT:partial$homelab/services/docker/ops.adoc[]

Connect via SSH and start the stack by using `xref:AUTO-GENERATED:bash-docs/src/main/homelab/services-cli-sh.adoc[~/work/repos/sebastian-sommerfeld-io/configs/src/main/homelab/services-cli.sh]`.

=== Docker Compose Stack: monitoring.fritz.box
include::ROOT:partial$homelab/services/docker/monitoring-fritz-box.adoc[]

Connect via SSH and start the stack by using `xref:AUTO-GENERATED:bash-docs/src/main/homelab/services-cli-sh.adoc[~/work/repos/sebastian-sommerfeld-io/configs/src/main/homelab/services-cli.sh]`.

== Risks and Technical Debts

. https://github.com/sebastian-sommerfeld-io/configs/issues/98
