= RasPi `supervisor.fritz.box`
Sebastian Sommerfeld <sebastian@sommerfeld.io>
:description: Installation guide for machine 'caprica'

CAUTION: The Raspberry Pi node "supervisor.fritz.box" is a temporary node (see below).

The Raspberry Pi node called "supervisor.fritz.box" is a node to analyze the stability of my monitoring setup. To achieve this, I have installed a stack of Prometheus and Grafana on the supervisor node to monitor my primary Raspberry Pi monitoring node, `xref:homelab/monitoring.fritz.box/index.adoc[]`.

The Prometheus and Grafana stack running on the supervisor node collects data about the health and performance of the monitoring node, including system metrics, service up/down status, and other critical data. This enables me to monitor and analyze the stability of the monitoring node, ensuring that it is running smoothly and efficiently.

If I find that the monitoring node is stable and runs without any crashes or unexpected behavior, I will tear down the supervisor node. However, if I notice any issues or problems with the monitoring node, I can quickly identify and address them using the data collected by the Prometheus and Grafana stack running on the supervisor node.

[cols="1,4", options="header"]
|===
|Metric |Value
|Model |Raspberry Pi 4 Model B
|===

include::ROOT:partial$homelab/workstations/common/raspi-rack.adoc[]

== Install
=== Operating System
Use the Raspberry Pi Imager to install "Ubuntu Server 23.04 (64-bit)" onto a SD card. Use the following settings:

image:ROOT:homelab/raspi-imager-settings.png[]

CAUTION: Make sure to enter a valid hostname and user `sebastian` uses the correct password!

=== Configuration and package installation
. Steps to run on you normal workstation (= a machine with SSH access to the RasPi node which is probably the ony you used to setup the SD card)
.. Enable passwordless SSH connections: `ssh sebastian@monitoring.fritz.box` and `ssh-copy-id sebastian@monitoring.fritz.box` or by using the Jarvis modules link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect-setup-passwordless/module-sh.html[ssh-connect-setup-passwordless] and link:/docs/projects/jarvis-cli-docs/main/AUTO-GENERATED/bash-docs/src/main/modules/ssh-connect/module-sh.html[ssh-connect] (all from your workstation, not on the RasPi node).
.. Apply ansible configs from this repo (`xref:AUTO-GENERATED:bash-docs/src/main/homelab/ansible-cli-sh.adoc[src/main/homelab/ansible-cli.sh]`)
. FritzBox Settings
.. It is recommended to always assign the same IP address to this RasPi node. This can help avoid issues with IP address conflicts or changes that could cause the communication between services to fail or become unreliable.

NOTE: This machine is not intended for development purposes so there is no need to push any data to Github. Therefore there is no SSH key configuration for GitHub on this machine. It is only possible to clone public repositories via HTTPS.

== Start Services
=== Docker Compose Stack: Ops
include::ROOT:partial$homelab/services/docker/ops.adoc[]

Connect via SSH and start the stack by using `xref:AUTO-GENERATED:bash-docs/src/main/homelab/services-cli-sh.adoc[~/work/repos/sebastian-sommerfeld-io/configs/src/main/homelab/services-cli.sh]`.

=== Docker Compose Stack: supervisor.fritz.box
include::ROOT:partial$homelab/services/docker/supervisor-fritz-box.adoc[]

Connect via SSH and start the stack by using `xref:AUTO-GENERATED:bash-docs/src/main/homelab/services-cli-sh.adoc[~/work/repos/sebastian-sommerfeld-io/configs/src/main/homelab/services-cli.sh]`.

== Risks and Technical Debts

. https://github.com/sebastian-sommerfeld-io/configs/issues/98

