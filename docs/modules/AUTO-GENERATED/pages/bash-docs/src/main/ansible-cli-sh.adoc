= ansible-cli.sh

// +-----------------------------------------------+
// |                                               |
// |    DO NOT EDIT HERE !!!!!                     |
// |                                               |
// |    File is auto-generated by pipline.         |
// |    Contents are based on bash script docs.    |
// |                                               |
// +-----------------------------------------------+


Command line interface to run Ansible playbooks.

== Overview

This script runs the Ansible playbooks. Ansible runs in Docker.

Make sure to run `ssh-copy-id <REMOTE_USER>@<REMOTE_SERVER>.fritz.box` for all relevant machines.

NOTE: Ansible expects the user `sebastian` to be present on all nodes. This user is the default
user for each node (workstation and RasPi). Normally this user is created from the setup wizard.
This scripts exits with `exitcode=8` if this user does not exist.

== [source, bash]

ssh-copy-id sebastian@caprica.fritz.box
ssh-copy-id sebastian@kobol.fritz.box
ssh-copy-id pi@prometheus.fritz.box
---

=== Script Arguments

The script does not accept any parameters.

== Index

* <<invoke,invoke>>
* <<ansible,ansible>>
* <<ansible-playbook,ansible-playbook>>

=== invoke

Wrapper function to encapsulate link:https://hub.docker.com/r/cytopia/ansible[ansible in a docker container].
The current working directory is mounted into the container and selected as working directory so that all file are
available to ansible. Paths are preserved.

==== Example

[,bash]
----
echo "test: $(invoke ansible --version)"
----

==== Arguments

* *...* (String): The ansible commands (1-n arguments) - $1 is mandatory

==== Exit codes

* *8*: If param with ansible command is missing

=== ansible

Facade to map `ansible` command.

==== Example

[,bash]
----
echo "test: $(ansible --version)"
----

==== Arguments

* *...* (String): The ansible-playbook commands (1-n arguments) - $1 is mandatory

=== ansible-playbook

Facade to map `ansible-playbook` command.

==== Example

[,bash]
----
echo "test: $(ansible-playbook playbook.yml)"
----

==== Arguments

* *...* (String): The ansible-playbook commands (1-n arguments) - $1 is mandatory
