= run-tests.sh

// +-----------------------------------------------+
// |                                               |
// |    DO NOT EDIT HERE !!!!!                     |
// |                                               |
// |    File is auto-generated by pipline.         |
// |    Contents are based on bash script docs.    |
// |                                               |
// +-----------------------------------------------+


Run Inspec tests against several machines.

== Overview

This script runs link:https://docs.chef.io/inspec[Chef Inspec] test profiles against
several machines.

Chef InSpec is an open-source framework for testing and auditing your applications and
infrastructure. Chef InSpec works by comparing the actual state of your system with the desired
state that you express in easy-to-read and easy-to-write Chef InSpec code. Chef InSpec detects
violations and displays findings in the form of a report, but puts you in control of remediation.

Inspec runs inside a Docker container with a non-root user. The profiles are auto-detected from
the filesystem). Profiles must be stored in a dedicated folder. The folder-name must mach the
group-name from the Ansible host inventory. The target machines are parsed from the Ansible
inventory file (`src/main/homelab/ansible/hosts.yml`).

IMPORTANT: This script is *not* intended for use "from anywhere". It is designed to work on my local
workstations and depend on (1) all nodes up-and running, (2) network connectivity to the respective
node and (3) correct SSH keys to connect to the respective node.

=== Script Arguments

The script does not accept any parameters.

=== Script Example

[source, bash]

----
./run-tests.sh
----

== Index

* <<_inspec,inspec>>

=== inspec

Wrapper function to encapsulate `inspec` in a docker container using the
link:https://hub.docker.com/r/chef/inspec[chef/inspec] image.

The container does not run as root. Filesystem dependencies are mounted into the container to ensure
the user inside the container shares all relevant information with the user from the host.

The current directory is mounted into the container and selected as working directory so that all
files of the project are available. Paths are preserved.

==== Example

[,bash]
----
inspec --version
----

==== Arguments

* *...* (String): The command arguments (1-n arguments) - $1 is mandatory
